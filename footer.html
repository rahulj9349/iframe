<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Footer</title>
      <link rel="stylesheet" href="https://ornateshoppe.com/demo_footer/assets/css/style.css">
      <link rel="stylesheet" href="https://ornateshoppe.com/demo_footer/assets/css/bootstrap.min.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/icofont@1.0.0/dist/icofont.min.css">
   </head>
   <body>
      <div class="bg_footer fonts">
         <div class="container">
            <div class="row pt-5 align-items-center">
               <div class="col-lg-3 col-12 text-center">
                  <a href="#!" class="text-decoration-none">
                  <img src="https://ornateshoppe.com/demo_footer/assets/img/logo.png" class="img-fluid" alt="logo">
                  </a>
                  <div class="ftr-git">
                     <p> Store Hours: 10:30 AM -7:30 PM <br>Monday Close </p>
                     <p> <i class="icofont-brand-whatsapp"></i> <a href="#!" class="text-decoration-none" title="Mobile Number">+91 9810030950</a> </p>
                     <p class="footer-social d-flex align-items-center justify-content-center column-gap-3"> <a href="#!" class="text-decoration-none" target="_blank" title="facebook"><i class="icofont-facebook"></i></a> <a href="#!" class="text-decoration-none" target="_blank" title="instagram"><i class="icofont-instagram"></i></a> <a href="#!" class="text-decoration-none" target="_blank" title="linkedin"><i class="icofont-linkedin"></i></a> <a href="!#" class="text-decoration-none" target="_blank" title="youtube"><i class="icofont-youtube"></i></a> </p>
                     <p> <i class="icofont-envelope"></i> <a href="#!" class="text-decoration-none" title="Email Id">jdsolitaire@gmail.com</a> </p>
                  </div>
               </div>
               <div class="col-lg-6 col-12">
                <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                           <img src="https://ornateshoppe.com/demo_footer/assets/img/banner_002817400.jpeg" class="d-block w-100" alt="...">
                        </div>
                        <div class="carousel-item">
                           <img src="https://ornateshoppe.com/demo_footer/assets/img/banner_007077600.jpeg" class="d-block w-100" alt="...">
                        </div>
                        <div class="carousel-item">
                           <img src="https://ornateshoppe.com/demo_footer/assets/img/banner_066101900.jpeg" class="d-block w-100" alt="...">
                        </div>
                     </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Next</span>
                    </button>
                  </div>
               </div>
               <div class="col-lg-3 col-12 text-center">
                  <div class="ftr-title">
                     <h2>GET IN TOUCH</h2>
                  </div>
                  <div class="ftr-git">
                     <p class="footer-number"> <i class="icofont-ui-call"></i> <a href="#!" class="text-decoration-none">+91 11 29848698</a>, <a href="#!" class="text-decoration-none">29830107</a>, <a href="!#" class="text-decoration-none">29838925</a> </p>
                     <p class="footer-address"> <i class="icofont-google-map"></i> <a href="#!" class="text-decoration-none" target="_blank"> A-56B, Central Market, <br>Lajpat Nagar-II, New Delhi-24</a> </p>
                     <h6 class="underline">Customer Services</h6>
                     <p>  <a href="#!" class="text-decoration-none">Return &amp; Refund Policy</a><br> <a href="#!" class="text-decoration-none">Terms &amp; Conditions</a><br> <a href="#!" class="text-decoration-none">Privacy Policy </a> </p>
                  </div>
               </div>
            </div>
            <div class="row">
               <div class="col-12">
                  <div class="footer__copyright__text text-center">
                     <p>Copyright Â© 2023 The Jdsolitaire. All rights reserved.</p>
                  </div>
               </div>
            </div>
            <p class="text-center"> solitaire diamond, solitaire rings, <a href="#!" class="text-decoration-none"><b>solitaire diamond rings</b></a>, solitaire engagement rings, solitaire rings for women, solitaire rings for men, solitaire earrings, <a href="#!" class="text-decoration-none"><b class="lazyloaded">diamond jewellery</b></a>, diamond set, diamond bangles, diamond necklace set, diamond pendant set, diamond earrings, diamond rings </p>
         </div>
      </div>
      <script src="https://cdn.jsdelivr.net/npm/icofont@1.0.0/main.min.js"></script>
      <script src="https://ornateshoppe.com/demo_footer/assets/js/bootstrap.bundle.min.js"></script>

    <script>
    function sendHeightToParent() {
        // Get the maximum of different height measurements to ensure accuracy
        const scrollHeight = document.documentElement.scrollHeight;
        const offsetHeight = document.documentElement.offsetHeight;
        const boundingRectHeight = document.documentElement.getBoundingClientRect().height;

        // Choose the maximum of the calculated heights
        const height = Math.max(scrollHeight, offsetHeight, boundingRectHeight);

        //console.log({ height: height, url: window.location.href });
        window.parent.postMessage(JSON.stringify({ height: height, url: window.location.href }), '*');
    }

    // Debounce function to limit the rate of sendHeightToParent calls
    function debounce(func, wait) {
        let timeout;
        return function (...args) {
            clearTimeout(timeout);
            timeout = setTimeout(() => func.apply(this, args), wait);
        };
    }

    const debouncedSendHeight = debounce(() => sendHeightToParent(), 100);

    // Function to wait until all fonts are loaded
    function waitForFontsToLoad() {
        if (document.fonts) {
            return document.fonts.ready;
        }
        return Promise.resolve();
    }

    // Retry mechanism with increasing delays
    function retrySendHeight(times, delay) {
        let retries = 0;

        function attempt() {
            const scrollHeight = document.documentElement.scrollHeight;
            const offsetHeight = document.documentElement.offsetHeight;
            const boundingRectHeight = document.documentElement.getBoundingClientRect().height;
            const currentHeight = Math.max(scrollHeight, offsetHeight, boundingRectHeight);

            // Only send if height seems stable
            if (retries < times) {
                retries++;
                setTimeout(attempt, delay * retries); // Increase delay exponentially
            } else {
                // Final attempt to send height
                sendHeightToParent();
            }
        }

        attempt();
    }

    // Start observing the body element for changes using MutationObserver
    const observer = new MutationObserver((mutations) => {
        const significantMutations = mutations.some((mutation) => {
            return mutation.type === 'childList' || mutation.type === 'characterData';
        });
        if (significantMutations) {
            debouncedSendHeight(); // Send the updated height after significant mutations settle
        }
    });

    observer.observe(document.body, {
        childList: true,     // Watch for child nodes added/removed
        subtree: true,       // Watch entire subtree of body
        attributes: true,    // Watch for attribute changes
        characterData: true  // Watch for text content changes
    });

    // Wait for all content to load (including images, fonts, etc.)
    function waitForContent() {
        return new Promise((resolve) => {
            const images = document.images;
            let loadedCount = 0;
            const totalImages = images.length;

            function checkAllImagesLoaded() {
                loadedCount++;
                if (loadedCount === totalImages) {
                    resolve(); // All images loaded, resolve the promise
                }
            }

            if (totalImages === 0) {
                resolve(); // No images, resolve immediately
            } else {
                for (let i = 0; i < totalImages; i++) {
                    if (images[i].complete) {
                        checkAllImagesLoaded();
                    } else {
                        images[i].addEventListener('load', checkAllImagesLoaded);
                        images[i].addEventListener('error', checkAllImagesLoaded); // Handle errors gracefully
                    }
                }
            }
        });
    }

    // Ensure all content, including fonts and images, is loaded before sending height
    async function ensureFullLoad() {
        await Promise.all([waitForContent(), waitForFontsToLoad()]);
        sendHeightToParent(); // Send height after everything is loaded
        retrySendHeight(5, 100); // Retry 5 times with increasing delay
    }

    window.onload = () => {
        setTimeout(ensureFullLoad, 200); // Make sure images and fonts are loaded before sending the initial height
    };

    window.onresize = () => {
        sendHeightToParent(); // Send height on window resize
    };

    // Periodic check to ensure height is correct, in case of delayed content loading
    let lastHeight = 0;
    let stableChecks = 0;  // Number of checks where the height has been stable
    const maxStableChecks = 3; // Require height to be stable for 3 checks
    const maxChecks = 20; // Maximum number of checks
    let checkCount = 0;

    function periodicHeightCheck() {
        const scrollHeight = document.documentElement.scrollHeight;
        const offsetHeight = document.documentElement.offsetHeight;
        const boundingRectHeight = document.documentElement.getBoundingClientRect().height;
        const currentHeight = Math.max(scrollHeight, offsetHeight, boundingRectHeight);

        if (currentHeight === lastHeight) {
            stableChecks++;
        } else {
            stableChecks = 0; // Reset if the height changed
        }

        if (stableChecks >= maxStableChecks || checkCount >= maxChecks) {
            // If the height has been stable for a few checks or max checks reached, send height
            sendHeightToParent();
        } else {
            // Retry after 200ms
            lastHeight = currentHeight;
            checkCount++;
            setTimeout(periodicHeightCheck, 200); // Check every 200ms
        }
    }

    // Start the periodic height checks after a slight delay to give the page time to fully load
    setTimeout(periodicHeightCheck, 500); // Initial delay for the periodic check
</script>




   </body>
</html>
